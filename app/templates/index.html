<html lang="en">

    <head>
        <title>CactusBot Control Panel</title>

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="csrf-token" content="{{ csrf_token() }}">

        <!-- Flask-y magicalness to include all of the dependencies -->

        {% assets "angular_material_js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
        {% endassets %} {% assets "angular_material_css" %}
        <link rel="stylesheet" href="{{ ASSET_URL }}"> {% endassets %} {% assets "dashboard_js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
        {% endassets %}
        <!-- Get the stylesheet -->

        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/index.css') }}">
    </head>

    <body ng-app="IndexApp" ng-controller="IndexControl">

        <!-- Display a cool little spinner when the frontend disconnects -->

        <div ng-cloak ng-hide="connected" id="cover">
            <md-progress-circular md-mode="indeterminate" class="md-hue-8" md-diameter="100px"></md-progress-circular>
        </div>

        <!-- Main site content -->

        <div ng-app="IndexApp" ng-controller="IndexControl" ng-cloak>
            <md-content>
                <md-tabs md-dynamic-height md-border-bottom ng-style="{backgroundColor: '699534'}">
                    {% if is_supported() %} {{ reset_supported() }} {[ showConfirmed($event) ]} {% endif %}
                    <!-- Dashboard tab -->

                    <md-tab label="Dashboard">
                        <md-content class="md-padding">
                            <h1 class="md-display-2">Welcome to your dashboard, {{ username }}!</h1>

                            <!-- Statistics -->
                            <div id="stats">

                                <pad loc="top" amt="25"></pad>

                                <h1 class="md-display-5">Statistics</h1>

                                <h1 class="md-subhead">Coming soonâ„¢!</h1>
                            </div>
                        </md-content>
                    </md-tab>

                    <!-- Bot settings tab -->

                    <md-tab label="Bot settings">
                        <md-content class="md-padding">
                            <h1 class="md-display-5">Bot settings</h1>
                            <div flex-xs flex-gt-xs="50" layout="column">
                                <span class="md-headline">Authentication</span>

                                <!-- TODO: Make the join chat button have the bot join the chat -->
                                <!-- TODO: Add `ng-disabled` onto the button and disable if the bot is already in chat -->
                                <!-- TODO: Add a force rejoin -->

                                <md-button>{{ bot_in_channel(username) }}</md-button>

                                <md-input-container md-no-float class="md-block">
                                    <input ng-model="botUsername" type="text" placeholder="Bot Username">
                                </md-input-container>

                                <md-input-container md-no-float class="md-block">
                                    <input ng-model="botPassword" type="password" placeholder="Bot Password">
                                </md-input-container>
                                <!-- TODO: Make the save button do things -->

                                <md-button>Save</md-button>

                                <span class="md-headline">Spam Protection</span>

                                <!-- Do you want spam protection? Because I'm pretty sure this is how you get spam protection. -->

                                <md-switch class="md-primary" md-no-ink aria-label="Enable Protection" ng-model="isProtected">
                                    Enable Protection?
                                </md-switch>

                                <pad loc="top" amt="5"></pad>

                                <!-- Do you want links? Because I'm - That joke is old now. -->

                                <md-switch class="md-primary" md-no-ink aria-label="Enable Protection" ng-model="allowLinks">
                                    Allow links?
                                </md-switch>

                                <pad loc="top" amt="30"></pad>

                                <h6 class="md-title">Max Caps</h6>
                                <md-slider ng-disabled="!isProtected" aria-label="Max Caps Slider" flex class="md-primary" md-discrete ng-model="maxCaps" step="1" min="1" max="480"></md-slider>

                                <pad loc="top" amt="50"></pad>

                                <h6 class="md-title">Max Emotes</h6>
                                <md-slider ng-disabled="!isProtected" aria-label="Max emotes slider" flex class="md-primary" md-discrete ng-model="maxEmotes" step="1" min="1" max="480"></md-slider>

                                <pad loc="top" amt="50"></pad>

                                <h6 class="md-title">Max Message Length</h6>
                                <md-slider ng-disabled="!isProtected" aria-label="Max message length" flex class="md-primary" md-discrete ng-model="maxMessageLength" step="1" min="1" max="480"></md-slider>

                                <pad loc="top" amt="50"></pad>

                                <!-- TODO: Make the save button work  -->

                                <md-button>Save</md-button>
                            </div>
                        </md-content>
                    </md-tab>

                    <md-tab label="Commands">
                        <md-content class="md-padding" layout="column">
                            <h1 class="md-display-5">Commands</h1>

                            <h3 class="md-head">Here's a list of your commands,
{{ username }}</h3>

                            <!-- Temp -->

                            <div class="row">
                                <div class="col-md-4" ng-repeat-start="command in commands">
                                    <md-input-container class="cmd">
                                        <label>Command name</label>
                                        <input ng-model="command.name">
                                    </md-input-container>


                                    <md-input-container class="resp" label="Command response">
                                        <input ng-model="command.response">
                                    </md-input-container>

                                </div>
                                <div class="clearfix" ng-if="$index%3==2"></div>
                                <div ng-repeat-end=""></div>
                            </div>
                        </md-content>
                    </md-tab>

                    <!-- User settings tab -->

                    <md-tab label="User Settings">
                        <md-content class="md-padding">
                            <h1 class="md-display-5">User settings</h1>

                            <h1 class="md-subhead">Coming soon!</h1>
                        </md-content>
                    </md-tab>

                    <!-- Support tab -->

                    <md-tab label="Support">
                        <md-content class="md-padding">
                            <h1 class="md-display-5">Support</h1>
                            <div ng-cloak>
                                <md-content>
                                    <md-button class="md-raised md-primary" ng-enabled="canSendSupportTicket" ng-click="showCreate($event)">Create Support Ticket</md-button>

                                    <md-list>
                                        <md-list-item class="md-3-line " ng-repeat="item in stuff ">
                                            <div class="md-list-item-text ">
                                                <h3>Representative: {[ item.user ]}</h3>
                                                <p>Latest response: {[ item.latest ]}</p>
                                            </div>

                                            <md-button class="md-secondary" ng-click="showRespond($event)">Respond</md-button>

                                            <md-divider ng-if="!$last"></md-divider>
                                        </md-list-item>
                                    </md-list>
                                </md-content>
                            </div>
                        </md-content>
                    </md-tab>
                </md-tabs>
            </md-content>
        </div>
    </body>

</html>
